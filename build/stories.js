(()=>{"use strict";const e=e=>{const t=document.createElement("div");t.className="app__header";const a=document.createElement("h1");a.className="app__title",a.textContent=e.title,t.append(a);const s=document.createElement("h2");return s.className="app__subtitle",s.textContent=e.subtitle,t.append(s),t},t=new Map;t.set([0],"min"),t.set([1,2],"mid"),t.set([3,4],"max"),t.set([5,6],"extra");const a=(a,s)=>{const c="landscape"===s?"2 —á–∞—Å–∞":"1 —á–∞—Å",n=e(a),r=document.createElement("div");r.className="app__box",r.append(((e,a)=>{const s=document.createElement("div"),c=Object.values(e.data);return s.className=`activity activity_${a}`,c.map((e=>{let c=((e,t)=>{let a=0,s=t;return e.reduce(((e,c,n,r)=>{const i=r.slice(a,s);if(i.length>0){const c=i.reduce(((e,t)=>e+t),0);e.push(c),a+=t,s+=t}return e}),[])})(e,"landscape"===a?2:1);const n=(e=>{const t=document.createElement("div");return t.className=e,t})(`activity__box_${a}`);s.append(n),c.map((e=>{const s=(e=>{let a="";return 0===e?a="min":(t.forEach(((t,s)=>{const[c,n]=s;e>=c&&e<=n&&(a=t)})),a)})(e);n.append((e=>{const t=document.createElement("div");return t.className=e,t})(`activity__cube activity__cube_${a} activity__cube_${a}_${s}`))}))})),s})(a,s));const i=document.createElement("div");i.className="activity__legend";const l=(e=>{const a=document.createElement("div");a.className="legend__row";const s=e=>{const t=document.createElement("div");t.className="legend__item";const a=document.createElement("div");a.className="legend__item-box";const s=document.createElement("div");return s.className="legend__item-text-gap",s.textContent=e,t.append(a),t.append(s),t};return a.append(s(e)),t.forEach(((e,t)=>{const c=s(t.join("-"));a.append(c)})),a.outerHTML})(c);i.innerHTML=l,r.append(i);const d=document.createElement("div");return d.className="app",d.append(n),d.append(r),d.outerHTML};class s{constructor(e,t,a,s="landscape"){this.alias=e,this.data=t,this.index=a,this.orientation=s}render(){switch(this.alias){case"leaders":return console.log("leaders"),((t,a)=>{const s=e(t),c=document.createElement("div");c.className="app__box",c.append(s);const n=document.createElement("div");n.className="leaders__list";const r=t.users.slice(0,5).map(((e,a)=>((e,t,a,s)=>`\n    <div class="leaders__list-item">\n      <div class="leaders__list-item-avatar">\n        <img class="leaders__list-item-avatar-img" src="images/2x/${e.avatar}"  alt="${e.name}" srcset="images/2x/${e.avatar} 1x,\n        images/4x/${e.avatar} 2x" />\n        <div class="leaders__list-item-emoji">${s+1===1?t:"üëç"}</div>\n      </div>\n      <div class="leaders__list-item-name">${e.name}</div>\n      <div class="leaders__list-item-count">${e.valueText}</div>\n      <div class="leaders__list-item-place">\n        <span class="leaders__list-item-place-num">${s+1}</span>\n      </div>\n    </div>\n  `)(e,t.emoji,0,a))).join("");return n.innerHTML=r,c.append(n),c.outerHTML})(this.data,this.index);case"vote":console.log("vote"),console.error("–®–∞–±–ª–æ–Ω–∞ –Ω–µ—Ç");break;case"chart":return console.log("chart"),((t,a)=>{const s=e(t),c=document.createElement("div");c.className="chart__box";const n=Math.max.apply(null,t.values.map((e=>e.value))),r=document.documentElement.clientHeight,i=t.values.slice(-10,-1).map((e=>((e,t,a,s)=>{const c={landscape:117/a,portrait:270/a},n=Math.floor(e.value*c[t])/s*100;return`\n    <div class="chart_col">\n      <div class="chart_col-count">${e.value}</div>\n      <div class="chart_col-box" style="height: ${n}vh"></div>\n      <div class="chart_col-num">${e.title}</div>\n    </div>\n  `})(e,a,n,r))).join("");c.insertAdjacentHTML("afterbegin",i);const l=document.createElement("div");l.className="chart__users";const d=t.users.slice(0,2).map((e=>{return`\n    <div class="chart__users-el">\n      <div class="chart__users-el-avatar">\n        <img class="chart__users-el-avatar-img" src="images/2x/${(t=e).avatar}"  alt="${t.name}" srcset="images/2x/${t.avatar} 1x, images/4x/${t.avatar} 2x">\n      </div>\n      <div class="chart__users-el-info">\n        <div class="chart__users-el-name">${t.name}</div>\n        <div class="chart__users-el-num">${t.valueText}</div>\n      </div>\n    </div>\n  `;var t})).join("");return l.insertAdjacentHTML("afterbegin",d),s.concat(c.outerHTML,l.outerHTML)})(this.data,this.orientation);case"diagram":return console.log("diagram"),(t=>{const a=e(t),s=document.querySelector(".app");s.append(a);const c=document.createElement("div");var n;c.className="chart_diagram",c.insertAdjacentHTML("afterbegin",`\n  <div class="chart_diagram__circle">\n      <svg class="chart_diagram__circle-chart" width="240" height="240" viewBox="0 0 285 285">\n        <circle class="chart_diagram__circle-chart-first" r="120" cx="50%" cy="50%"  stroke-dasharray="188.2 753"></circle>\n        <circle class="chart_diagram__circle-chart-second" r="120" cx="50%" cy="50%" stroke-dasharray="188.2 753" stroke-dashoffset="-188.2"></circle>\n        <circle class="chart_diagram__circle-chart-middle" r="120" cx="50%" cy="50%" stroke-dasharray="188.2 753" stroke-dashoffset="-376.5"></circle>\n        <circle class="chart_diagram__circle-chart-last" r="120" cx="50%" cy="50%" stroke-dasharray="188.2 753" stroke-dashoffset="-564.75"></circle>\n      </svg>\n     <div class="chart_diagram__circle-box">\n      <h3 class="chart_diagram__circle-title">${(n=t).totalText}</h3>\n      <p class="chart_diagram__circle-result">${n.differenceText}</p>\n    </div>\n  </div>\n  `);const r=document.createElement("div");r.className="chart_diagram__info";const i=t.categories.map((e=>(e=>`\n    <div class="chart_diagram__row">\n      <div class="chart_diagram__row-circle"></div>\n      <div class="chart_diagram__row-counts">${e.title}</div>\n      <div class="chart_diagram__row-progress">${e.differenceText}</div>\n      <div class="chart_diagram__row-result">${e.valueText}</div>\n    </div>\n  `)(e))).join("");return r.insertAdjacentHTML("afterbegin",i),c.insertAdjacentHTML("beforeend",r.outerHTML),s.append(c),s.outerHTML})(this.data);case"activity":return console.log("activity"),a(this.data,this.orientation);default:console.log("Sorry, we are out of "+this.alias+".")}}}const c=new URL(window.location.href),n=parseInt(c.searchParams.get("slide"))>=1?parseInt(c.searchParams.get("slide"))-1:0,r=c.searchParams.get("theme")||null;sessionStorage.setItem("theme",r||"dark"),r&&document.body.classList.add({light:"theme_light",dark:"theme_dark"}[r]),window.renderTemplate=(e,t)=>{const a=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait";return console.log(n),console.log(a),console.log(sessionStorage.getItem("theme")),new s(e,t,n,a).render()},window.addEventListener("load",(async()=>{await(async()=>{try{const e=await fetch("/data.json"),t=await e.json(),a=t[n].alias,s=t[n].data,c=renderTemplate(a,s);document.body.innerHTML=c,window.addEventListener("resize",(e=>{document.body.innerHTML="";const t=renderTemplate(a,s);setTimeout((()=>{document.body.innerHTML=t}),100)}))}catch(e){console.error("–û—à–∏–±–∫–∞: "+e)}})()}))})();