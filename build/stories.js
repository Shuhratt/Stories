(()=>{"use strict";const e=e=>{const t=document.createElement("h1");t.className="app__title",t.textContent=e.title;const a=document.createElement("h2");return a.className="app__subtitle",a.textContent=e.subtitle,t.outerHTML.concat(a.outerHTML)},t=(e,t,a)=>e>0?e*t:a;class a{constructor(e,t,a,r="landscape"){this.alias=e,this.data=t,this.index=a,this.orientation=r}render(){switch(this.alias){case"leaders":return console.log("leaders"),((t,a)=>{const r=e(t),s=document.createElement("div");s.className="leaders__list";const i=t.users.slice(0,5).map(((e,a)=>((e,t,a,r)=>`\n    <div class="leaders__list-item">\n      <div class="leaders__list-item-avatar">\n        <img class="leaders__list-item-avatar-img" src="images/2x/${e.avatar}"  alt="${e.name}" srcset="images/2x/${e.avatar} 1x,\n        images/4x/${e.avatar} 2x" />\n        <div class="leaders__list-item-emoji">${r+1===1?t:"üëç"}</div>\n      </div>\n      <div class="leaders__list-item-name">${e.name}</div>\n      <div class="leaders__list-item-count">${e.valueText}</div>\n      <div class="leaders__list-item-place">\n        <span class="leaders__list-item-place-num">${r+1}</span>\n      </div>\n    </div>\n  `)(e,t.emoji,0,a))).join("");return s.innerHTML=i,r.concat(s.outerHTML)})(this.data,this.index);case"vote":console.log("vote"),console.error("–®–∞–±–ª–æ–Ω–∞ –Ω–µ—Ç");break;case"chart":return console.log("chart"),((t,a)=>{const r=e(t),s=document.createElement("div");s.className="chart__box";const i=Math.max.apply(null,t.values.map((e=>e.value))),c=document.documentElement.clientHeight,n=t.values.slice(-10,-1).map((e=>((e,t,a,r)=>{const s={landscape:117/a,portrait:270/a},i=Math.floor(e.value*s[t])/r*100;return`\n    <div class="chart_col">\n      <div class="chart_col-count">${e.value}</div>\n      <div class="chart_col-box" style="height: ${i}vh"></div>\n      <div class="chart_col-num">${e.title}</div>\n    </div>\n  `})(e,a,i,c))).join("");s.insertAdjacentHTML("afterbegin",n);const l=document.createElement("div");l.className="chart__users";const o=t.users.slice(0,2).map((e=>{return`\n    <div class="chart__users-el">\n      <div class="chart__users-el-avatar">\n        <img class="chart__users-el-avatar-img" src="images/2x/${(t=e).avatar}"  alt="${t.name}" srcset="images/2x/${t.avatar} 1x, images/4x/${t.avatar} 2x">\n      </div>\n      <div class="chart__users-el-info">\n        <div class="chart__users-el-name">${t.name}</div>\n        <div class="chart__users-el-num">${t.valueText}</div>\n      </div>\n    </div>\n  `;var t})).join("");return l.insertAdjacentHTML("afterbegin",o),r.concat(s.outerHTML,l.outerHTML)})(this.data,this.orientation);case"diagram":return console.log("diagram"),(t=>{const a=e(t),r=document.createElement("div");var s;r.className="chart_diagram",r.insertAdjacentHTML("afterbegin",`\n  <div class="chart_diagram__circle">\n      <svg class="chart_diagram__circle-chart" width="240" height="240" viewBox="0 0 285 285">\n        <circle class="chart_diagram__circle-chart-first" r="120" cx="50%" cy="50%"  stroke-dasharray="188.2 753"></circle>\n        <circle class="chart_diagram__circle-chart-second" r="120" cx="50%" cy="50%" stroke-dasharray="188.2 753" stroke-dashoffset="-188.2"></circle>\n        <circle class="chart_diagram__circle-chart-middle" r="120" cx="50%" cy="50%" stroke-dasharray="188.2 753" stroke-dashoffset="-376.5"></circle>\n        <circle class="chart_diagram__circle-chart-last" r="120" cx="50%" cy="50%" stroke-dasharray="188.2 753" stroke-dashoffset="-564.75"></circle>\n      </svg>\n     <div class="chart_diagram__circle-box">\n      <h3 class="chart_diagram__circle-title">${(s=t).totalText}</h3>\n      <p class="chart_diagram__circle-result">${s.differenceText}</p>\n    </div>\n  </div>\n  `);const i=document.createElement("div");i.className="chart_diagram__info";const c=t.categories.map((e=>(e=>`\n    <div class="chart_diagram__row">\n      <div class="chart_diagram__row-circle"></div>\n      <div class="chart_diagram__row-counts">${e.title}</div>\n      <div class="chart_diagram__row-progress">${e.differenceText}</div>\n      <div class="chart_diagram__row-result">${e.valueText}</div>\n    </div>\n  `)(e))).join("");return i.insertAdjacentHTML("afterbegin",c),r.insertAdjacentHTML("beforeend",i.outerHTML),a.concat(r.outerHTML)})(this.data);case"activity":return console.log("activity"),((a,r)=>{const s=e(a);return((e,a,r,s)=>{const i={dark:{default:{left:["rgba(0, 0, 0, 0.8)","rgba(19, 17, 16, 0.8)","rgba(112, 102, 94, 0.2)"],right:["rgba(58, 53, 48, 0.9)","rgba(73, 66, 61, 0.9)","rgba(112, 102, 94, 0.2)"],top:["rgba(34, 31, 28, 0.9)","rgba(62, 57, 52, 0.9)","rgba(236, 234, 233, 0.15)"]},third:{left:["rgba(35, 22, 0, 0.9)","rgba(112, 92, 94, 0.9)","rgba(93, 116, 141, 0.6)"],right:["rgba(35, 22, 0, 0.9)","rgba(112, 92, 94, 0.9)","rgba(93, 116, 141, 0.6)"],top:["rgba(35, 22, 0, 0.9)","rgba(112, 92, 94, 0.9)","rgba(93, 116, 141, 0.6)"]},middle:{left:["rgba(33, 22, 2, 0.9)","rgba(172, 113, 9, .9)","rgba(242, 159, 13, 0.6)"],right:["rgba(32, 21, 2, 1)","rgba(199, 131, 10, 1)","rgba(255, 255, 255, 0.6)"],top:["rgba(33,22,2,0.9)","rgba(172,113,9,0.9)","rgba(242, 159, 13, 0.6)"]},maximum:{left:["rgba(32, 21, 2, 1)","rgba(199, 131, 10, 1)","rgba(242, 159, 13, 0.9)"],right:["rgba(32, 21, 2, 1)","rgba(199, 131, 10, 1)","rgba(242, 159, 13, 0.9)"],top:["rgba(32, 21, 2, 0.8)","rgba(199, 131, 10, 0.8)","rgba(242, 159, 13, 0.9)"]}},light:{default:{left:[],right:[],top:[]},third:{left:[],right:[],top:[]},middle:{left:[],right:[],top:[]},maximum:{left:[],right:[],top:[]}}},c=document.createElement("canvas"),n=document.getElementById("app");c.width=window.innerWidth*(425/668),c.height=window.innerHeight,c.style.marginLeft="auto",c.style.marginRight="auto",c.style.display="block",n.append(c);const l=c.getContext("2d");l.clearRect(0,0,c.width,c.height),l.scale(2.5,2.5),l.translate(0,100);const o=(e,t,a,r,s,i={},c="default",n)=>{l.lineJoin="round",l.beginPath(),l.moveTo(e,t),l.lineTo(e-a,t-r),l.lineTo(e-a,t-r-s),l.lineTo(e,t-s),l.closePath();const o=l.createLinearGradient(e-a,t-r-s,e,t);o.addColorStop(0,i[n][c].left[1]),o.addColorStop(.8,i[n][c].left[0]),o.addColorStop(1,i[n][c].left[0]),l.strokeStyle=o,l.fillStyle=o,l.stroke(),l.fill(),l.beginPath(),l.moveTo(e,t),l.lineTo(e,t-s),l.lineTo(e+a,t-s-r),l.lineTo(e+a,t-r),l.closePath();const d=l.createLinearGradient(e+a,t-s-r,e,t);d.addColorStop(0,i[n][c].right[1]),o.addColorStop(.8,i[n][c].right[0]),d.addColorStop(1,i[n][c].right[0]),l.strokeStyle=d,l.fillStyle=d,l.stroke(),l.fill(),l.beginPath(),l.moveTo(e,t-s),l.lineTo(e-a,t-r-s),l.lineTo(e,t-s-2*r),l.lineTo(e+a,t-s-r),l.shadowColor=i[n][c].top[2],l.closePath();const m=l.createLinearGradient(e-a,t-r-s,e+a,t-s-r);m.addColorStop(0,i[n][c].top[0]),m.addColorStop(1,i[n][c].top[1]),l.strokeStyle=m,l.fillStyle=m,l.shadowBlur=.1,l.stroke(),l.fill()};let d=50,m=sessionStorage.getItem("theme");Object.values(e.data).map(((e,a)=>{let r=(a+=1)%2?17:34,s=d+=12;const c=((e,t)=>{let a=0,r=2;return e.reduce(((e,t,s,i)=>{const c=i.slice(a,r);if(c.length>0){const t=c.reduce(((e,t)=>e+t),0);e.push(t),a+=2,r+=2}return e}),[])})(e),n=t(c[0],10,5);o(r,s,17,12,n,i,"default",m),c.map((e=>{const a=t(e,10,5);o(r+=34,s,17,12,a,i,"middle",m)}))}))})(a),s})(this.data,this.orientation);default:console.log("Sorry, we are out of "+this.alias+".")}}}const r=document.getElementById("app"),s=new URL(window.location.href),i=parseInt(s.searchParams.get("slide"))>=1?parseInt(s.searchParams.get("slide"))-1:0,c=s.searchParams.get("theme")||null;sessionStorage.setItem("theme",c||"dark"),c&&document.body.classList.add({light:"theme_light",dark:"theme_dark"}[c]),window.renderTemplate=(e,t)=>{const s=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait";console.log(i),console.log(s),console.log(sessionStorage.getItem("theme"));const c=new a(e,t,i,s).render();r.insertAdjacentHTML("afterbegin",c)},fetch("/data.json").then((e=>e.json())).then((e=>{const t=e[i].alias,a=e[i].data;renderTemplate(t,a),window.addEventListener("resize",(e=>{window.renderTemplate(t,a)}))})).catch((e=>{console.error("–û—à–∏–±–∫–∞: "+e)}))})();